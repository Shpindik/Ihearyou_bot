#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å flow –∏ —Å—Å—ã–ª–∫–∞–º–∏ —Å —Å–∞–π—Ç–∞ ihearyou.ru
"""

import asyncio
from typing import List, Dict, Any

from core.db import AsyncSessionLocal
from crud import MenuItemCRUD, ContentFileCRUD
from models.enums import ContentType, AccessLevel
from models.menu import MenuItem
from models.content_file import ContentFile
from sqlalchemy import delete, select


class FlowDataLoader:
    """–ö–ª–∞—Å—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å flow."""
    
    def __init__(self):
        self.menu_crud = MenuItemCRUD()
        self.content_crud = ContentFileCRUD()
    
    async def clear_existing_data(self, session):
        """–û—á–∏—Å—Ç–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ."""
        print("üßπ –û—á–∏—Å—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö...")
        
        # –£–¥–∞–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é
        await session.execute(
            delete(ContentFile).where(ContentFile.menu_item_id.in_([52, 53, 54, 65]))
        )
        
        # –£–¥–∞–ª—è–µ–º –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã
        await session.execute(
            delete(MenuItem).where(MenuItem.parent_id.in_([52, 53, 54, 65]))
        )
        
        await session.commit()
        print("‚úÖ –î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã")
    
    async def create_main_menu_items(self, session):
        """–°–æ–∑–¥–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—É–Ω–∫—Ç—ã –º–µ–Ω—é."""
        print("üìã –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é...")
        
        main_items = [
            {
                "title": "–î–∏–∞–≥–Ω–æ–∑",
                "description": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ —Å–ª—É—Ö–∞",
                "bot_message": "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:",
                "content": "üîç **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–ª—É—Ö–∞**\n\n–î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–ª—É—Ö–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:\n\n1. **–ê—É–¥–∏–æ–º–µ—Ç—Ä–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç—Ä–æ—Ç—ã —Å–ª—É—Ö–∞\n2. **–¢–∏–º–ø–∞–Ω–æ–º–µ—Ç—Ä–∏—è** - –æ—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ö–∞\n3. **–†–µ—á–µ–≤–∞—è –∞—É–¥–∏–æ–º–µ—Ç—Ä–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–±–æ—Ä—á–∏–≤–æ—Å—Ç–∏ —Ä–µ—á–∏\n\n–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞-—Å—É—Ä–¥–æ–ª–æ–≥–∞.\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–°–ª—É—Ö–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã",
                "description": "–í—Å—ë –æ —Å–ª—É—Ö–æ–≤—ã—Ö –∞–ø–ø–∞—Ä–∞—Ç–∞—Ö",
                "bot_message": "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –æ —Å–ª—É—Ö–æ–≤—ã—Ö –∞–ø–ø–∞—Ä–∞—Ç–∞—Ö:",
                "content": "üéß **–°–ª—É—Ö–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã**\n\n**–¢–∏–ø—ã —Å–ª—É—Ö–æ–≤—ã—Ö –∞–ø–ø–∞—Ä–∞—Ç–æ–≤:**\n\n‚Ä¢ **–ó–∞—É—à–Ω—ã–µ (BTE)** - –º–æ—â–Ω—ã–µ, –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –ø–æ—Ç–µ—Ä—å —Å–ª—É—Ö–∞\n‚Ä¢ **–í–Ω—É—Ç—Ä–∏—É—à–Ω—ã–µ (ITE)** - –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ\n‚Ä¢ **–í–Ω—É—Ç—Ä–∏–∫–∞–Ω–∞–ª—å–Ω—ã–µ (ITC)** - –Ω–µ–∑–∞–º–µ—Ç–Ω—ã–µ, –¥–ª—è –ª–µ–≥–∫–∏—Ö –ø–æ—Ç–µ—Ä—å\n‚Ä¢ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –≤–Ω—É—Ç—Ä–∏–∫–∞–Ω–∞–ª—å–Ω—ã–µ (CIC)** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç—ã–µ\n\n**–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**\n- –¶–∏—Ñ—Ä–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–≤—É–∫–∞\n- –®—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ\n- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω—ã\n- Bluetooth –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–û–±—É—á–µ–Ω–∏–µ",
                "description": "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏",
                "bot_message": "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –æ–±—É—á–µ–Ω–∏—è:",
                "content": "üìö **–û–±—É—á–µ–Ω–∏–µ –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è**\n\n**–≠—Ç–∞–ø—ã –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –∫ —Å–ª—É—Ö–æ–≤–æ–º—É –∞–ø–ø–∞—Ä–∞—Ç—É:**\n\n1. **–ü–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è** - –ø—Ä–∏–≤—ã–∫–∞–Ω–∏–µ –∫ –∑–≤—É–∫–∞–º\n2. **–í—Ç–æ—Ä–∞—è –Ω–µ–¥–µ–ª—è** - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–æ—à–µ–Ω–∏—è\n3. **–¢—Ä–µ—Ç–∏–π –º–µ—Å—è—Ü** - –ø–æ–ª–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è\n\n**–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:**\n‚Ä¢ –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å —Ç–∏—Ö–∏—Ö –∑–≤—É–∫–æ–≤\n‚Ä¢ –ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ—Å—å –≤ —á—Ç–µ–Ω–∏–∏ –ø–æ –≥—É–±–∞–º\n‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª—É—Ö–æ–≤–æ–π –∞–ø–ø–∞—Ä–∞—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ\n‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–æ—Å–µ—â–∞–π—Ç–µ —Å—É—Ä–¥–æ–ª–æ–≥–∞\n\n**–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è —Å–ª—É—Ö–∞:**\n- –°–ª—É—à–∞–π—Ç–µ –º—É–∑—ã–∫—É\n- –ß–∏—Ç–∞–π—Ç–µ –≤—Å–ª—É—Ö\n- –ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ—Å—å –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–∞—Ö\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–ü–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞",
                "description": "–ü–æ–ª—É—á–∏—Ç–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é —ç–∫—Å–ø–µ—Ä—Ç–∞",
                "bot_message": "–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞?",
                "content": "üë®‚Äç‚öïÔ∏è **–ü–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞**\n\n–ù–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å –≤–∞–º:\n\n‚Ä¢ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ —Å–ª—É—Ö—É\n‚Ä¢ –ü–æ–¥–±–æ—Ä —Å–ª—É—Ö–æ–≤—ã—Ö –∞–ø–ø–∞—Ä–∞—Ç–æ–≤\n‚Ä¢ –†–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è –ø–æ—Å–ª–µ –∫–æ—Ö–ª–µ–∞—Ä–Ω–æ–π –∏–º–ø–ª–∞–Ω—Ç–∞—Ü–∏–∏\n‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–π\n\n**–ö–æ–Ω—Ç–∞–∫—Ç—ã:**\nüìû +7 911 282 48 55\nüìû +7 921 930 78 63\nüìß info@ihearyou.ru\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            }
        ]
        
        for item_data in main_items:
            # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é
            menu_item = MenuItem(
                title=item_data["title"],
                description=item_data["description"],
                bot_message=item_data["bot_message"],
                parent_id=None,
                is_active=True,
                access_level=AccessLevel.FREE
            )
            session.add(menu_item)
            await session.flush()  # –ü–æ–ª—É—á–∞–µ–º ID
            
            # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
            content = ContentFile(
                menu_item_id=menu_item.id,
                content_type=ContentType.TEXT,
                content_text=item_data["content"],
                is_primary=True,
                sort_order=1
            )
            session.add(content)
        
        await session.commit()
        print("‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—É–Ω–∫—Ç—ã –º–µ–Ω—é —Å–æ–∑–¥–∞–Ω—ã")
    
    async def create_diagnosis_subitems(self, session):
        """–°–æ–∑–¥–∞—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã –¥–ª—è '–î–∏–∞–≥–Ω–æ–∑'."""
        print("üîç –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤ '–î–∏–∞–≥–Ω–æ–∑'...")
        
        # –ù–∞—Ö–æ–¥–∏–º ID –ø—É–Ω–∫—Ç–∞ "–î–∏–∞–≥–Ω–æ–∑"
        diagnosis_item = await session.execute(
            select(MenuItem).where(MenuItem.title == "–î–∏–∞–≥–Ω–æ–∑")
        )
        diagnosis_item = diagnosis_item.scalar_one_or_none()
        if not diagnosis_item:
            print("‚ùå –ü—É–Ω–∫—Ç '–î–∏–∞–≥–Ω–æ–∑' –Ω–µ –Ω–∞–π–¥–µ–Ω")
            return
        
        subitems = [
            {
                "title": "–ö–∞–∫ –ø—Ä–∏–Ω—è—Ç—å –¥–∏–∞–≥–Ω–æ–∑",
                "description": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–Ω—è—Ç–∏–∏ –¥–∏–∞–≥–Ω–æ–∑–∞",
                "bot_message": "–ü—Ä–∏–Ω—è—Ç–∏–µ –¥–∏–∞–≥–Ω–æ–∑–∞ - –≤–∞–∂–Ω—ã–π —à–∞–≥.",
                "content": "üíô **–ö–∞–∫ –ø—Ä–∏–Ω—è—Ç—å –¥–∏–∞–≥–Ω–æ–∑**\n\n–ü—Ä–∏–Ω—è—Ç–∏–µ –¥–∏–∞–≥–Ω–æ–∑–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º. –í–∞–∂–Ω–æ:\n\n‚Ä¢ –î–∞—Ç—å —Å–µ–±–µ –≤—Ä–µ–º—è –Ω–∞ –æ—Å–æ–∑–Ω–∞–Ω–∏–µ\n‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º\n‚Ä¢ –ù–∞–π—Ç–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Ä–æ–¥–∏—Ç–µ–ª–µ–π\n‚Ä¢ –ò–∑—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã\n\n**–ü–æ–º–Ω–∏—Ç–µ:** –í—ã –Ω–µ –æ–¥–∏–Ω–æ–∫–∏ –≤ —ç—Ç–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–í–≤–µ–¥–µ–Ω–∏–µ, –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è",
                "description": "–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –æ —Å–ª—É—Ö–µ",
                "bot_message": "–ò–∑—É—á–∏—Ç–µ –æ—Å–Ω–æ–≤—ã —Å–ª—É—Ö–∞.",
                "content": "üìñ **–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è –æ —Å–ª—É—Ö–µ**\n\n**–ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω —Å–ª—É—Ö:**\n‚Ä¢ –ù–∞—Ä—É–∂–Ω–æ–µ —É—Ö–æ - —É–ª–∞–≤–ª–∏–≤–∞–µ—Ç –∑–≤—É–∫–∏\n‚Ä¢ –°—Ä–µ–¥–Ω–µ–µ —É—Ö–æ - –ø–µ—Ä–µ–¥–∞–µ—Ç –∑–≤—É–∫–æ–≤—ã–µ –∫–æ–ª–µ–±–∞–Ω–∏—è\n‚Ä¢ –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Ö–æ - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∑–≤—É–∫ –≤ –Ω–µ—Ä–≤–Ω—ã–µ –∏–º–ø—É–ª—å—Å—ã\n‚Ä¢ –°–ª—É—Ö–æ–≤–æ–π –Ω–µ—Ä–≤ - –ø–µ—Ä–µ–¥–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –≤ –º–æ–∑–≥\n\n**–¢–∏–ø—ã –Ω–∞—Ä—É—à–µ–Ω–∏–π —Å–ª—É—Ö–∞:**\n‚Ä¢ –ö–æ–Ω–¥—É–∫—Ç–∏–≤–Ω–∞—è —Ç—É–≥–æ—É—Ö–æ—Å—Ç—å\n‚Ä¢ –°–µ–Ω—Å–æ–Ω–µ–≤—Ä–∞–ª—å–Ω–∞—è —Ç—É–≥–æ—É—Ö–æ—Å—Ç—å\n‚Ä¢ –°–º–µ—à–∞–Ω–Ω–∞—è —Ç—É–≥–æ—É—Ö–æ—Å—Ç—å\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–¢–∏–ø—ã –Ω–∞—Ä—É—à–µ–Ω–∏–π —Å–ª—É—Ö–∞",
                "description": "–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π —Å–ª—É—Ö–∞",
                "bot_message": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∏–ø–∞—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π",
                "content": "üîä **–¢–∏–ø—ã –Ω–∞—Ä—É—à–µ–Ω–∏–π —Å–ª—É—Ö–∞**\n\n**–ü–æ —Å—Ç–µ–ø–µ–Ω–∏ –ø–æ—Ç–µ—Ä–∏ —Å–ª—É—Ö–∞:**\n‚Ä¢ –õ–µ–≥–∫–∞—è (20-40 –¥–ë)\n‚Ä¢ –£–º–µ—Ä–µ–Ω–Ω–∞—è (41-55 –¥–ë)\n‚Ä¢ –£–º–µ—Ä–µ–Ω–Ω–æ-—Ç—è–∂–µ–ª–∞—è (56-70 –¥–ë)\n‚Ä¢ –¢—è–∂–µ–ª–∞—è (71-90 –¥–ë)\n‚Ä¢ –ì–ª—É–±–æ–∫–∞—è (–±–æ–ª–µ–µ 90 –¥–ë)\n\n**–ü–æ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏:**\n‚Ä¢ –û–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è\n‚Ä¢ –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞",
                "description": "–ú–µ—Ç–æ–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–ª—É—Ö–∞",
                "bot_message": "–ö–∞–∫ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞",
                "content": "ü©∫ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–ª—É—Ö–∞**\n\n**–ú–µ—Ç–æ–¥—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**\n\n1. **–ê—É–¥–∏–æ–º–µ—Ç—Ä–∏—è**\n   - –¢–æ–Ω–∞–ª—å–Ω–∞—è –∞—É–¥–∏–æ–º–µ—Ç—Ä–∏—è\n   - –†–µ—á–µ–≤–∞—è –∞—É–¥–∏–æ–º–µ—Ç—Ä–∏—è\n   - –ò–≥—Ä–æ–≤–∞—è –∞—É–¥–∏–æ–º–µ—Ç—Ä–∏—è (–¥–ª—è –¥–µ—Ç–µ–π)\n\n2. **–¢–∏–º–ø–∞–Ω–æ–º–µ—Ç—Ä–∏—è**\n   - –û—Ü–µ–Ω–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ö–∞\n   - –í—ã—è–≤–ª–µ–Ω–∏–µ –ø–∞—Ç–æ–ª–æ–≥–∏–π\n\n3. **–û–ê–≠ (–û—Ç–æ–∞–∫—É—Å—Ç–∏—á–µ—Å–∫–∞—è —ç–º–∏—Å—Å–∏—è)**\n   - –°–∫—Ä–∏–Ω–∏–Ω–≥ –Ω–æ–≤–æ—Ä–æ–∂–¥–µ–Ω–Ω—ã—Ö\n   - –û—Ü–µ–Ω–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —É–ª–∏—Ç–∫–∏\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            }
        ]
        
        await self._create_subitems(session, diagnosis_item.id, subitems)
        print("‚úÖ –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã '–î–∏–∞–≥–Ω–æ–∑' —Å–æ–∑–¥–∞–Ω—ã")
    
    async def create_hearing_aids_subitems(self, session):
        """–°–æ–∑–¥–∞—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã –¥–ª—è '–°–ª—É—Ö–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã'."""
        print("üéß –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤ '–°–ª—É—Ö–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã'...")
        
        # –ù–∞—Ö–æ–¥–∏–º ID –ø—É–Ω–∫—Ç–∞ "–°–ª—É—Ö–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã"
        hearing_aids_item = await session.execute(
            select(MenuItem).where(MenuItem.title == "–°–ª—É—Ö–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã")
        )
        hearing_aids_item = hearing_aids_item.scalar_one_or_none()
        if not hearing_aids_item:
            print("‚ùå –ü—É–Ω–∫—Ç '–°–ª—É—Ö–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã' –Ω–µ –Ω–∞–π–¥–µ–Ω")
            return
        
        subitems = [
            {
                "title": "–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∞–ø–ø–∞—Ä–∞—Ç–∞",
                "description": "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–ª—É—Ö–æ–≤–æ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞",
                "bot_message": "–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–∞—à –∞–ø–ø–∞—Ä–∞—Ç.",
                "content": "üîß **–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∞–ø–ø–∞—Ä–∞—Ç–∞**\n\n**–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**\n\n1. **–ë–∞—Ç–∞—Ä–µ–π–∫–∏**\n   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞—Ä—è–¥\n   - –ó–∞–º–µ–Ω–∏—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏\n\n2. **–í–Ω–µ—à–Ω–∏–π –æ—Å–º–æ—Ç—Ä**\n   - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π\n   - –ß–∏—Å—Ç–æ—Ç–∞ –∫–æ—Ä–ø—É—Å–∞\n\n3. **–ó–≤—É–∫**\n   - –¢–µ—Å—Ç –≤ —Ç–∏—Ö–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ\n   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —à—É–º–Ω–æ–π —Å—Ä–µ–¥–µ\n\n4. **–í–∫–ª–∞–¥—ã—à–∏**\n   - –ß–∏—Å—Ç–æ—Ç–∞ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å\n   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–ö–∞–∫ —á–∏—Å—Ç–∏—Ç—å –∞–ø–ø–∞—Ä–∞—Ç",
                "description": "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —á–∏—Å—Ç–∫–µ —Å–ª—É—Ö–æ–≤–æ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞",
                "bot_message": "–ß–∏—Å—Ç–æ—Ç–∞ - –∑–∞–ª–æ–≥ –¥–æ–ª–≥–æ–π —Å–ª—É–∂–±—ã.",
                "content": "üßΩ **–ö–∞–∫ —á–∏—Å—Ç–∏—Ç—å —Å–ª—É—Ö–æ–≤–æ–π –∞–ø–ø–∞—Ä–∞—Ç**\n\n**–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —É—Ö–æ–¥:**\n\n1. **–ö–æ—Ä–ø—É—Å –∞–ø–ø–∞—Ä–∞—Ç–∞**\n   - –°—É—Ö–∞—è –º—è–≥–∫–∞—è —Ç–∫–∞–Ω—å\n   - –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∞–ª—Ñ–µ—Ç–∫–∏\n   - –ò–∑–±–µ–≥–∞–π—Ç–µ –≤–ª–∞–≥–∏\n\n2. **–í–∫–ª–∞–¥—ã—à–∏**\n   - –ú—ã–ª—å–Ω–∞—è –≤–æ–¥–∞\n   - –ú—è–≥–∫–∞—è —â–µ—Ç–∫–∞\n   - –¢—â–∞—Ç–µ–ª—å–Ω–∞—è —Å—É—à–∫–∞\n\n3. **–§–∏–ª—å—Ç—Ä—ã**\n   - –†–µ–≥—É–ª—è—Ä–Ω–∞—è –∑–∞–º–µ–Ω–∞\n   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—Å–æ—Ä–µ–Ω–∏—è\n\n**–í–∞–∂–Ω–æ:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–∏—Ä—Ç –∏–ª–∏ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞!\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–ü–æ—á–µ–º—É –∞–ø–ø–∞—Ä–∞—Ç —Å–≤–∏—Å—Ç–∏—Ç",
                "description": "–ü—Ä–∏—á–∏–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –≤ —Å–ª—É—Ö–æ–≤—ã—Ö –∞–ø–ø–∞—Ä–∞—Ç–∞—Ö",
                "bot_message": "–†–∞–∑–±–µ—Ä–µ–º—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π —Å–≤–∏—Å—Ç–∞.",
                "content": "üîä **–ü–æ—á–µ–º—É –∞–ø–ø–∞—Ä–∞—Ç —Å–≤–∏—Å—Ç–∏—Ç**\n\n**–ü—Ä–∏—á–∏–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏:**\n\n1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞**\n   - –°–ª–∞–±–∞—è –ø–æ—Å–∞–¥–∫–∞ –≤–∫–ª–∞–¥—ã—à–∞\n   - –ù–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ä–∞–∑–º–µ—Ä\n\n2. **–ó–∞—Å–æ—Ä–µ–Ω–∏–µ**\n   - –°–µ—Ä–Ω–∞—è –ø—Ä–æ–±–∫–∞\n   - –ó–∞–≥—Ä—è–∑–Ω–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã\n\n3. **–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è**\n   - –¢—Ä–µ—â–∏–Ω—ã –≤ –∫–æ—Ä–ø—É—Å–µ\n   - –ò–∑–Ω–æ—Å –≤–∫–ª–∞–¥—ã—à–∞\n\n4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**\n   - –°–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —É—Å–∏–ª–µ–Ω–∏—è\n   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞\n\n**–†–µ—à–µ–Ω–∏–µ:** –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É!\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ –∏ —Ü–∏—Ñ—Ä–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã",
                "description": "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Å–ª—É—Ö–æ–≤—ã—Ö –∞–ø–ø–∞—Ä–∞—Ç–æ–≤",
                "bot_message": "–£–∑–Ω–∞–π—Ç–µ –æ —Ä–∞–∑–ª–∏—á–∏—è—Ö.",
                "content": "‚ö° **–ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ –∏ —Ü–∏—Ñ—Ä–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã**\n\n**–ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã:**\n‚Ä¢ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏\n‚Ä¢ –ù–∏–∑–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å\n‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏\n‚Ä¢ –ë–∞–∑–æ–≤–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ –∑–≤—É–∫–∞\n\n**–¶–∏—Ñ—Ä–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã:**\n‚Ä¢ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏\n‚Ä¢ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–∞\n‚Ä¢ –®—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ\n‚Ä¢ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω—ã\n‚Ä¢ Bluetooth –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ\n‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã\n\n**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –¶–∏—Ñ—Ä–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ!\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            }
        ]
        
        await self._create_subitems(session, hearing_aids_item.id, subitems)
        print("‚úÖ –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã '–°–ª—É—Ö–æ–≤—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã' —Å–æ–∑–¥–∞–Ω—ã")
    
    async def create_education_subitems(self, session):
        """–°–æ–∑–¥–∞—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã –¥–ª—è '–û–±—É—á–µ–Ω–∏–µ'."""
        print("üìö –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤ '–û–±—É—á–µ–Ω–∏–µ'...")
        
        # –ù–∞—Ö–æ–¥–∏–º ID –ø—É–Ω–∫—Ç–∞ "–û–±—É—á–µ–Ω–∏–µ"
        education_item = await session.execute(
            select(MenuItem).where(MenuItem.title == "–û–±—É—á–µ–Ω–∏–µ")
        )
        education_item = education_item.scalar_one_or_none()
        if not education_item:
            print("‚ùå –ü—É–Ω–∫—Ç '–û–±—É—á–µ–Ω–∏–µ' –Ω–µ –Ω–∞–π–¥–µ–Ω")
            return
        
        subitems = [
            {
                "title": "–ñ–∏–∑–Ω—å —Å –æ—Å–æ–±–µ–Ω–Ω—ã–º —Ä–µ–±–µ–Ω–∫–æ–º",
                "description": "–°–æ–≤–µ—Ç—ã –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π",
                "bot_message": "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ.",
                "content": "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ **–ñ–∏–∑–Ω—å —Å –æ—Å–æ–±–µ–Ω–Ω—ã–º —Ä–µ–±–µ–Ω–∫–æ–º**\n\n**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**\n\n‚Ä¢ **–ü—Ä–∏–Ω—è—Ç–∏–µ** - –ª—é–±–∏—Ç–µ —Ä–µ–±–µ–Ω–∫–∞ —Ç–∞–∫–∏–º, –∫–∞–∫–æ–π –æ–Ω –µ—Å—Ç—å\n‚Ä¢ **–¢–µ—Ä–ø–µ–Ω–∏–µ** - —Ä–∞–∑–≤–∏—Ç–∏–µ —Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏\n‚Ä¢ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞** - –∏—â–∏—Ç–µ –ø–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤\n‚Ä¢ **–û–±—â–µ–Ω–∏–µ** - –≥–æ–≤–æ—Ä–∏—Ç–µ —Å —Ä–µ–±–µ–Ω–∫–æ–º\n\n**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã:**\n‚Ä¢ –°–æ–∑–¥–∞–π—Ç–µ —Å–ª—É—Ö–æ–≤—É—é —Å—Ä–µ–¥—É\n‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏\n‚Ä¢ –†–∞–∑–≤–∏–≤–∞–π—Ç–µ —Ä–µ—á—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ\n‚Ä¢ –ù–∞—Ö–æ–¥–∏—Ç–µ –≤—Ä–µ–º—è –¥–ª—è –∏–≥—Ä\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–†–ö–° - —à–∫–æ–ª–∞ –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π",
                "description": "–†–µ—Å—É—Ä—Å—ã –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π",
                "bot_message": "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π.",
                "content": "üè´ **–†–ö–° - —à–∫–æ–ª–∞ –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π**\n\n**–ß—Ç–æ –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º:**\n\n‚Ä¢ **–ö—É—Ä—Å—ã –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π**\n  - –û—Å–Ω–æ–≤—ã —Å–ª—É—Ö–∞\n  - –†–∞–∑–≤–∏—Ç–∏–µ —Ä–µ—á–∏\n  - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –∞–ø–ø–∞—Ä–∞—Ç—É\n\n‚Ä¢ **–ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞–Ω—è—Ç–∏—è**\n  - –û–±–º–µ–Ω –æ–ø—ã—Ç–æ–º\n  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞\n  - –°–æ–≤–º–µ—Å—Ç–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏\n\n‚Ä¢ **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏**\n  - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥\n  - –†–µ—à–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á\n\n**–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É!**\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º",
                "description": "–ö–∞–∫ –ø–æ–º–æ—á—å —Ä–µ–±–µ–Ω–∫—É –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è",
                "bot_message": "–ü–æ–º–æ–∂–µ–º —Ä–µ–±–µ–Ω–∫—É –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è.",
                "content": "üåü **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º**\n\n**–≠—Ç–∞–ø—ã –∞–¥–∞–ø—Ç–∞—Ü–∏–∏:**\n\n1. **–ü—Ä–∏–Ω—è—Ç–∏–µ**\n   - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π\n   - –†–∞–±–æ—Ç–∞ —Å —ç–º–æ—Ü–∏—è–º–∏\n\n2. **–û–±—É—á–µ–Ω–∏–µ**\n   - –ò–∑—É—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ —Ä–∞–∑–≤–∏—Ç–∏—è\n   - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏\n\n3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**\n   - –í–∫–ª—é—á–µ–Ω–∏–µ –≤ –æ–±—â–µ—Å—Ç–≤–æ\n   - –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏\n\n**–í–∞–∂–Ω–æ:** –ö–∞–∂–¥—ã–π —Ä–µ–±–µ–Ω–æ–∫ —É–Ω–∏–∫–∞–ª–µ–Ω!\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–£—Ö–æ–¥ –∑–∞ —Å–ª—É—Ö–æ–≤—ã–º –∞–ø–ø–∞—Ä–∞—Ç–æ–º",
                "description": "–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —É—Ö–æ–¥ –∑–∞ –∞–ø–ø–∞—Ä–∞—Ç–æ–º",
                "bot_message": "–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —É—Ö–æ–¥ –ø—Ä–æ–¥–ª–∏—Ç —Å—Ä–æ–∫ —Å–ª—É–∂–±—ã.",
                "content": "üõ†Ô∏è **–£—Ö–æ–¥ –∑–∞ —Å–ª—É—Ö–æ–≤—ã–º –∞–ø–ø–∞—Ä–∞—Ç–æ–º**\n\n**–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —É—Ö–æ–¥:**\n\n‚Ä¢ **–û—á–∏—Å—Ç–∫–∞**\n  - –°—É—Ö–∞—è –º—è–≥–∫–∞—è —Ç–∫–∞–Ω—å\n  - –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞\n  - –ò–∑–±–µ–≥–∞–π—Ç–µ –≤–ª–∞–≥–∏\n\n‚Ä¢ **–•—Ä–∞–Ω–µ–Ω–∏–µ**\n  - –°—É—Ö–æ–µ –º–µ—Å—Ç–æ\n  - –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—ã–ª–∏\n  - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞\n\n‚Ä¢ **–ë–∞—Ç–∞—Ä–µ–π–∫–∏**\n  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—Ä—è–¥–∞\n  - –°–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞\n  - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ\n\n**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–ª–≥–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞!\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            }
        ]
        
        await self._create_subitems(session, education_item.id, subitems)
        print("‚úÖ –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã '–û–±—É—á–µ–Ω–∏–µ' —Å–æ–∑–¥–∞–Ω—ã")
    
    async def create_specialist_help_subitems(self, session):
        """–°–æ–∑–¥–∞—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã –¥–ª—è '–ü–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞'."""
        print("üë®‚Äç‚öïÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤ '–ü–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞'...")
        
        # –ù–∞—Ö–æ–¥–∏–º ID –ø—É–Ω–∫—Ç–∞ "–ü–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞"
        specialist_item = await session.execute(
            select(MenuItem).where(MenuItem.title == "–ü–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞")
        )
        specialist_item = specialist_item.scalar_one_or_none()
        if not specialist_item:
            print("‚ùå –ü—É–Ω–∫—Ç '–ü–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞' –Ω–µ –Ω–∞–π–¥–µ–Ω")
            return
        
        subitems = [
            {
                "title": "–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª—É—Ö —Ä–µ–±–µ–Ω–∫–∞",
                "description": "–ú–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–ª—É—Ö–∞ —É –¥–µ—Ç–µ–π",
                "bot_message": "–†–∞–Ω–Ω—è—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤–∞–∂–Ω–∞.",
                "content": "üë∂ **–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª—É—Ö —Ä–µ–±–µ–Ω–∫–∞**\n\n**–í–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**\n\n‚Ä¢ **0-6 –º–µ—Å—è—Ü–µ–≤**\n  - –†–µ—Ñ–ª–µ–∫—Ç–æ—Ä–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏\n  - –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã\n\n‚Ä¢ **6-18 –º–µ—Å—è—Ü–µ–≤**\n  - –ò–≥—Ä–æ–≤–∞—è –∞—É–¥–∏–æ–º–µ—Ç—Ä–∏—è\n  - –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ\n\n‚Ä¢ **18+ –º–µ—Å—è—Ü–µ–≤**\n  - –£—Å–ª–æ–≤–Ω–æ-—Ä–µ—Ñ–ª–µ–∫—Ç–æ—Ä–Ω–∞—è –∞—É–¥–∏–æ–º–µ—Ç—Ä–∏—è\n  - –†–µ—á–µ–≤—ã–µ —Ç–µ—Å—Ç—ã\n\n**–í–∞–∂–Ω–æ:** –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–ª—É—Ö–∞!\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–û—à–∏–±–∫–∏, —á–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å",
                "description": "–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π",
                "bot_message": "–ò–∑–±–µ–≥–∞–π—Ç–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫.",
                "content": "‚ö†Ô∏è **–û—à–∏–±–∫–∏, —á–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å**\n\n**–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π:**\n\n‚Ä¢ **–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**\n  - –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–º–ø—Ç–æ–º–æ–≤\n  - –û—Ç–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ –≤–∏–∑–∏—Ç–∞ –∫ –≤—Ä–∞—á—É\n\n‚Ä¢ **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è**\n  - –°–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è\n  - –ù–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏\n\n‚Ä¢ **–ò–∑–æ–ª—è—Ü–∏—è —Ä–µ–±–µ–Ω–∫–∞**\n  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–±—â–µ–Ω–∏—è\n  - –ì–∏–ø–µ—Ä–æ–ø–µ–∫–∞\n\n‚Ä¢ **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤**\n  - –°–∞–º–æ–ª–µ—á–µ–Ω–∏–µ\n  - –ù–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º\n\n**–ü–æ–º–Ω–∏—Ç–µ:** –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å –≤–∞–∂–Ω–∞!\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            },
            {
                "title": "–ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤",
                "description": "–ö–∞–∫ —Å–≤—è–∑–∞—Ç—å—Å—è —Å —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏",
                "bot_message": "–ú—ã –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å.",
                "content": "üìû **–ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤**\n\n**–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:**\n\n‚Ä¢ **–¢–µ–ª–µ—Ñ–æ–Ω:**\n  +7 911 282 48 55\n  +7 921 930 78 63\n\n‚Ä¢ **Email:**\n  info@ihearyou.ru\n\n‚Ä¢ **–ê–¥—Ä–µ—Å:**\n  –†–æ—Å—Å–∏—è, –≥. –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥,\n  —É–ª. –í–∞—Ä—à–∞–≤—Å–∫–∞—è, 23-2-306\n\n‚Ä¢ **–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:**\n  –ü–Ω-–ü—Ç: 9:00-18:00\n  –°–±-–í—Å: –ø–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏\n\n**–ú—ã –ø–æ–º–æ–∂–µ–º –≤–∞–º!**\n\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.ihearyou.ru/"
            }
        ]
        
        await self._create_subitems(session, specialist_item.id, subitems)
        print("‚úÖ –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã '–ü–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞' —Å–æ–∑–¥–∞–Ω—ã")
    
    async def _create_subitems(self, session, parent_id: int, subitems: List[Dict[str, Any]]):
        """–°–æ–∑–¥–∞—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é."""
        for subitem_data in subitems:
            # –°–æ–∑–¥–∞–µ–º –ø—É–Ω–∫—Ç –º–µ–Ω—é
            menu_item = MenuItem(
                title=subitem_data["title"],
                description=subitem_data["description"],
                bot_message=subitem_data["bot_message"],
                parent_id=parent_id,
                is_active=True,
                access_level=AccessLevel.FREE
            )
            session.add(menu_item)
            await session.flush()  # –ü–æ–ª—É—á–∞–µ–º ID
            
            # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
            content = ContentFile(
                menu_item_id=menu_item.id,
                content_type=ContentType.TEXT,
                content_text=subitem_data["content"],
                is_primary=True,
                sort_order=1
            )
            session.add(content)
        
        await session.commit()
    
    async def load_all_data(self):
        """–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ."""
        async with AsyncSessionLocal() as session:
            try:
                await self.clear_existing_data(session)
                await self.create_main_menu_items(session)
                await self.create_diagnosis_subitems(session)
                await self.create_hearing_aids_subitems(session)
                await self.create_education_subitems(session)
                await self.create_specialist_help_subitems(session)
                
                print("\nüéâ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")
                print("\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:")
                print(f"‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤: 4")
                print(f"‚Ä¢ –ü–æ–¥—Ä–∞–∑–¥–µ–ª–æ–≤: 15")
                print(f"‚Ä¢ –í—Å–µ–≥–æ –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é: 19")
                print(f"‚Ä¢ –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã—Ö –±–ª–æ–∫–æ–≤: 19")
                
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö: {e}")
                await session.rollback()
                raise


async def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è."""
    print("üöÄ –ó–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å flow...")
    
    loader = FlowDataLoader()
    await loader.load_all_data()
    
    print("\n‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!")


if __name__ == "__main__":
    asyncio.run(main())
